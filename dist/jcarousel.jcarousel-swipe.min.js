!function(t){"use strict";t.jCarousel.plugin("jcarouselSwipe",{_options:{target:"+=1"},_init:function(){},_create:function(){this._instance=this.carousel().data("jcarousel"),this._instance._element.css("touch-action","pan-y"),this._initGestures()},_initGestures:function(){function t(t){t=t.originalEvent||t||window.event,c=i(t),a._element.on("touchmove.jcarouselSwipe",e),a._element.on("touchend.jcarouselSwipe touchcancel.jcarouselSwipe",n)}function e(t){var e,n;return t=t.originalEvent||t||window.event,r=i(t),l&&t.preventDefault(),Math.abs(c.y-r.y)>10&&!l?void a._element.off("touchmove.jcarouselSwipe"):void(!_&&Math.abs(c.x-r.x)>10&&(e=c.x-r.x,l||(l=!0,a._addClones(),a._currentLeft=a._getListPosition(),o=a._instance.items().last(),s=-1*(o.position().left+o.outerWidth()-a._instance.carousel().outerWidth())),n="circular"===a._instance._options.wrap?a._currentLeft-e:Math.min(0,Math.max(a._currentLeft-e,s)),a._setListPosition({left:n+"px"})))}function n(){if(l){var t=a._getNewTarget(c.x-r.x>0);t="circular"===a._instance._options.wrap?t.relative:t["static"],a._removeClones(),a._instance._items=null,_=!0,a._instance.scroll(t,function(){l=!1,_=!1}),a._element.off("touchmove.jcarouselSwipe"),a._element.off("touchend.jcarouselSwipe touchcancel.jcarouselSwipe")}}function i(t){return void 0!==t.touches?{x:t.touches[0].pageX,y:t.touches[0].pageY}:void 0!==t.pageX?{x:t.pageX,y:t.pageY}:{x:t.clientX,y:t.clientY}}var s,o,a=this,c={},r={},l=!1,_=!1;this._element.on("touchstart.jcarouselSwipe",t)},_getNewTarget:function(t){for(var e=this._instance.target(),n=this._instance.index(e),i=0,s=this._instance.carousel().offset().left,o=this._instance.items().length;;){if(t&&e.offset().left-s>=0||!t&&e.offset().left-s<=0)break;t?(e=e.next(),n=n+1>=o?0:n+1):(e=e.prev(),n=0>n-1?o-1:n-1),i++}return{"static":n,relative:(t?"+":"-")+"="+i}},_getListPosition:function(){return this._instance.list().position()[this._instance.lt]},_setListPosition:function(t){var e=this._instance.options("transitions"),n=!!e.transforms,i=!!e.transforms3d,s={};i?s.transform="translate3d("+(t.left||0)+","+(t.top||0)+",0)":n?s.transform="translate("+(t.left||0)+","+(t.top||0)+")":s=t,this._instance.list().css(s)},_addClones:function(){var t,e,n,i=this,s=i._instance.items(),o=i._instance.first(),a=i._instance.last(),c=i._instance.clipping(),r=[],l=[],_=i._getListPosition();if("circular"!==this._instance._options.wrap)return!1;for(e=0,n=0,t=o;c>e;)t=t.prev(),0===t.length?(--n,e+=i._instance.dimension(s.eq(n)),r.push(s.eq(n).clone().attr("data-jcarousel-clone",!0))):e+=i._instance.dimension(t);for(_=Math.min(_,-e)+"px",e=0,n=-1,t=a;c>e;)t=t.next(),0===t.length?(++n,e+=i._instance.dimension(s.eq(n)),l.push(s.eq(n).clone().attr("data-jcarousel-clone",!0))):e+=i._instance.dimension(t);i._instance._items.first().before(r.reverse()),i._instance._items.last().after(l),i._instance.move({left:_})},_removeClones:function(){var t,e=this._instance.first().position()[this._instance.lt];this._instance.list().find("[data-jcarousel-clone]").remove(),t=Math.abs(this._instance.first().position()[this._instance.lt]-e),t&&this._instance.move({left:this._getListPosition()+t+"px"})},_destroy:function(){},_reload:function(){}})}(jQuery);