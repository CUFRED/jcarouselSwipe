!function(e){"use strict";e.jCarousel.plugin("jcarouselSwipe",{_init:function(){var e=this;this.carousel().on("jcarousel:reloadend",function(){e._reload()})},_create:function(){this._instance=this.carousel().data("jcarousel"),this._instance._element.css("touch-action","pan-y"),this.carousel().find("img").attr("draggable",!1),this._destroy(),this._instance.items().length>this._instance.fullyvisible().length&&this._initGestures()},_initGestures:function(){function t(t){t=t.originalEvent||t||window.event,r=s(t),e(document).on("touchmove.jcarouselSwipe mousemove.jcarouselSwipe",n),e(document).on("touchend.jcarouselSwipe touchcancel.jcarouselSwipe mouseup.jcarouselSwipe",i)}function n(t){var n,i;return t=t.originalEvent||t||window.event,u=s(t),l&&t.preventDefault(),Math.abs(r.y-u.y)>10&&!l?void e(document).off("touchmove.jcarouselSwipe mousemove.jcarouselSwipe"):void(!_&&Math.abs(r.x-u.x)>10&&(n=r.x-u.x,l||(l=!0,c._addClones(),c._currentLeft=c._getListPosition(),a=c._instance.items().last(),o=-1*(a.position().left+a.outerWidth()-c._instance.carousel().outerWidth())),i="circular"===c._instance._options.wrap?c._currentLeft-n:Math.min(0,Math.max(c._currentLeft-n,o)),c._setListPosition({left:i+"px"})))}function i(){if(l){var t=c._getNewTarget(r.x-u.x>0);t="circular"===c._instance._options.wrap?t.relative:t["static"],c._removeClones(),c._instance._items=null,_=!0,c._instance.scroll(t,function(){l=!1,_=!1})}e(document).off("touchmove.jcarouselSwipe mousemove.jcarouselSwipe"),e(document).off("touchend.jcarouselSwipe touchcancel.jcarouselSwipe mouseup.jcarouselSwipe")}function s(e){return void 0!==e.touches?{x:e.touches[0].pageX,y:e.touches[0].pageY}:void 0!==e.pageX?{x:e.pageX,y:e.pageY}:{x:e.clientX,y:e.clientY}}var o,a,c=this,r={},u={},l=!1,_=!1;this._element.on("touchstart.jcarouselSwipe mousedown.jcarouselSwipe",t)},_getNewTarget:function(e){for(var t=this._instance.target(),n=this._instance.index(t),i=0,s=this._instance.carousel().offset().left,o=this._instance.items().length;;){if(e&&t.offset().left-s>=0||!e&&t.offset().left-s<=0)break;e?(t=t.next(),n=n+1>=o?0:n+1):(t=t.prev(),n=0>n-1?o-1:n-1),i++}return{"static":n,relative:(e?"+":"-")+"="+i}},_getListPosition:function(){return this._instance.list().position()[this._instance.lt]},_setListPosition:function(e){var t=this._instance.options("transitions"),n=!!t.transforms,i=!!t.transforms3d,s={};i?s.transform="translate3d("+(e.left||0)+","+(e.top||0)+",0)":n?s.transform="translate("+(e.left||0)+","+(e.top||0)+")":s=e,this._instance.list().css(s)},_addClones:function(){var t,n,i,s=this,o=s._instance.items(),a=s._instance.first(),c=s._instance.last(),r=e(window).width(),u=[],l=[],_=s._getListPosition();if("circular"!==this._instance._options.wrap)return!1;for(n=0,i=0,t=a;r>n;)t=t.prev(),0===t.length?(i=--i<-o.length?-1:i,n+=s._instance.dimension(o.eq(i)),u.push(o.eq(i).clone().attr("data-jcarousel-clone",!0))):n+=s._instance.dimension(t);for(_=Math.min(_,-n)+"px",n=0,i=-1,t=c;r>n;)t=t.next(),0===t.length?(i=++i>o.length-1?0:i,n+=s._instance.dimension(o.eq(i)),l.push(o.eq(i).clone().attr("data-jcarousel-clone",!0))):n+=s._instance.dimension(t);s._instance._items.first().before(u.reverse()),s._instance._items.last().after(l),s._instance.move({left:_})},_removeClones:function(){var e,t=this._instance.first().position()[this._instance.lt];this._instance.list().find("[data-jcarousel-clone]").remove(),e=Math.abs(this._instance.first().position()[this._instance.lt]-t),e&&this._instance.move({left:this._getListPosition()+e+"px"})},_destroy:function(){this._element.off("touchstart.jcarouselSwipe mousedown.jcarouselSwipe"),e(document).off("touchmove.jcarouselSwipe mousemove.jcarouselSwipe touchend.jcarouselSwipe touchcancel.jcarouselSwipe mouseup.jcarouselSwipe")},_reload:function(){this._create()}})}(jQuery);